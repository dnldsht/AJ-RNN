const m = {
  "GRU128-G5-LR6-BS256": {
    "seed89": {
      "maxVal": {
        "e": 302,
        "train": 87.3,
        "v": 72.0,
        "t": 77.6
      },
      "maxTrain": {
        "e": 599,
        "train": 89.2,
        "v": 69.0,
        "t": 74.5
      },
    },
    "seed27836": {
      "maxVal": {
        "e": 106,
        "train": 88.0,
        "v": 74.4,
        "t": 69.2
      },
      "maxTrain": {
        "e": 599,
        "train": 90.7,
        "v": 69.1,
        "t": 54.3
      },
    },
    "seed196": {
      "maxVal": {
        "e": 89,
        "train": 85.8,
        "v": 76.8,
        "t": 76.6
      },
      "maxTrain": {
        "e": 599,
        "train": 88.1,
        "v": 73.1,
        "t": 73.6
      },
    },
  },
  "GRU128-G5-LR6-BS256-REG-DROP": {
    "seed89": {
      "maxVal": {
        "e": 46,
        "train": 84.8,
        "v": 71.2,
        "t": 76.8
      },
      "maxTrain": {
        "e": 599,
        "train": 89.3,
        "v": 63.2,
        "t": 69.3
      },
    },
    "seed196": {
      "maxVal": {
        "e": 255,
        "train": 87.0,
        "v": 78.1,
        "t": 77.3
      },
      "maxTrain": {
        "e": 599,
        "train": 89.7,
        "v": 67.4,
        "t": 69.6
      },
    }
  },


"GRU128-G1-LR6-BS256": {
    "seed89": {
      "maxVal": {
        "e": 598,
        "train": 85.5,
        "v": 83.7,
        "t": 84.9
      },
      "maxTrain": {
        "e": 599,
        "train": 85.5,
        "v": 83.7,
        "t": 84.9
      },
    },
    "seed27836": {
      "maxVal": {
        "e": 598,
        "train": 85.5,
        "v": 81.9,
        "t": 76.2
      },
      "maxTrain": {
        "e": 599,
        "train": 85.5,
        "v": 81.9,
        "t": 76.2
      },
    },
  },
  "GRU128-G1-LR3-BS256": {
    "seed196": {
      "maxVal": {
        "e": 599,
        "train": 97.9,
        "v": 87.7,
        "t": 82.5
      },
      "maxTrain": {
        "e": 585,
        "train": 98.0,
        "v": 86.5,
        "t": 81.8
      },
    },
  },
  "GRU128-G1-LR3-BS256-REG-DROP (best)": {
    "seed89": {
      "maxVal": {
        "e": 587,
        "train": 97.8,
        "v": 87.1,
        "t": 88.3
      },
      "maxTrain": {
        "e": 593,
        "train": 99.4,
        "v": 85.7,
        "t": 87.6
      },
    },
    "seed196": {
      "maxVal": {
        "e": 577,
        "train": 85.3,
        "v": 84.5,
        "t": 82.6
      },
      "maxTrain": {
        "e": 196,
        "train": 89.8,
        "v": 42.1,
        "t": 45.7
      },
    },
  },
  "GRU128-G1-LR3-BS256-REG (2 best)": {
    "seed89": {
      "maxVal": {
        "e": 584,
        "train": 96.1,
        "v": 83.9,
        "t": 76.2
      },
      "maxTrain": {
        "e": 595,
        "train": 96.7,
        "v": 72.8,
        "t": 71.8
      },
    },
    "seed196": {
      "maxVal": {
        "e": 577,
        "train": 85.3,
        "v": 84.5,
        "t": 82.6
      },
      "maxTrain": {
        "e": 196,
        "train": 89.8,
        "v": 42.1,
        "t": 45.7
      },
    },
  }
}

const m32 = {
  "GRU128-G5-LR6-BS32": {
    "seed89": {
      "maxVal": {
        "e": 23,
        "train": 95.1,
        "v": 19.1,
        "t": 28.8
      },
      "maxTrain": {
        "e": 537,
        "train": 99.5,
        "v": 18.0,
        "t": 26.9
      },
    },
    
    "seed196": {
      "maxVal": {
        "e": 6,
        "train": 90.7,
        "v": 27.8,
        "t": 29.6
      },
      "maxTrain": {
        "e": 599,
        "train": 99.4,
        "v": 16.4,
        "t": 16.9
      },
    },
    
  },
  "GRU128-G5-LR6-BS32-REG-DROP": {
    "seed89": {
      "maxVal": {
        "e": 10,
        "train": 93.0,
        "v": 18.9,
        "t": 28.9
      },
      "maxTrain": {
        "e": 247,
        "train": 99.4,
        "v": 16.9,
        "t": 26.7
      },
    },
   
  },
  "GRU128-G1-LR6-BS32 (best)": {
    "seed89": {
      "maxVal": {
        "e": 11,
        "train": 82.7,
        "v": 61.9,
        "t": 68.6
      },
      "maxTrain": {
        "e": 11,
        "train": 82.7,
        "v": 61.9,
        "t": 68.6
      },
    },
    
    "seed27836": {
      "maxVal": {
        "e": 44,
        "train": 88.2,
        "v": 67.4,
        "t": 57.7
      },
      "maxTrain": {
        "e": 599,
        "train": 92.2,
        "v": 33.9,
        "t": 23.4
      },
    },
    
  },
  "GRU128-G1-LR3-BS32-REG-DROP": {
    "seed89": {
      "maxVal": {
        "e": 305,
        "train": 97.8,
        "v": 20.4,
        "t": 29.3
      },
      "maxTrain": {
        "e": 553,
        "train": 99.0,
        "v": 4.1,
        "t": 4.9
      },
    },
    
  },
  "GRU128-G1-LR3-BS32-REG": {
    "seed89": {
      "maxVal": {
        "e": 491,
        "train": 98.2,
        "v": 20.6,
        "t": 30.1
      },
      "maxTrain": {
        "e": 450,
        "train": 98.9,
        "v": 5.2,
        "t": 8.1
      },
    },
    
  },
}

const a = Object.entries(m).reduce((acc, [key, value]) => {
  const len = Object.keys(value).length

  const metrics = Object.values(value)

  const maxValE = metrics.reduce((acc, val) => acc + val.maxVal.e, 0) / len
  const maxValTrain = metrics.reduce((acc, val) => acc + val.maxVal.train, 0) / len
  const maxValV = metrics.reduce((acc, val) => acc + val.maxVal.v, 0) / len
  const maxValT = metrics.reduce((acc, val) => acc + val.maxVal.t, 0) / len
  
  const maxTrainE = metrics.reduce((acc, val) => acc + val.maxTrain.e, 0) / len
  const maxTrainTrain = metrics.reduce((acc, val) => acc + val.maxTrain.train, 0) / len
  const maxTrainV = metrics.reduce((acc, val) => acc + val.maxTrain.v, 0) / len
  const maxTrainT = metrics.reduce((acc, val) => acc + val.maxTrain.t, 0) / len



  acc[key] =  {
    runs: len,
    maxVal: {
      epochs: maxValE.toFixed(0),
      train: maxValTrain.toFixed(1),
      val: maxValV.toFixed(1),
      test: maxValT.toFixed(1)
    },
    maxTrain: {
      epochs: maxTrainE.toFixed(1),
      train: maxTrainTrain.toFixed(1),
      val: maxTrainV.toFixed(1),
      test: maxTrainT.toFixed(1)
    }
  }
  return acc
}, {})

for (const [key, value] of Object.entries(a)) {
  const { maxVal, maxTrain, runs } = value
  console.log(`### ${key} (${runs} runs)`)
  console.log(`| type | epochs | train | val | test |`)
  console.log(`| --- | --- | --- | --- | --- |`)
  console.log(`| max val | ${maxVal.epochs} | ${maxVal.train} | ${maxVal.val} | ${maxVal.test} |`)
  console.log(`| max train | ${maxTrain.epochs} | ${maxTrain.train} | ${maxTrain.val} | ${maxTrain.test} |`)

  console.log()
}